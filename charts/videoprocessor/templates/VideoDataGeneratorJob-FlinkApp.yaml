{{- if .Values.VideoDataGeneratorJob.enabled }}
apiVersion: flink.nautilus.dellemc.com/v1beta1
kind: "FlinkApplication"
metadata:
  name: "video-data-generator-job"
  labels:
    app: videoprocessor
    component: VideoDataGeneratorJob
    release: {{ $.Release.Name }}
spec:
  flinkVersion: 1.7.2
  mavenCoordinate: {{ .Values.flink.applications.coordination.group }}:{{ .Values.flink.applications.coordination.artifact }}:{{ .Values.flink.applications.coordination.version }}

  parallelism: {{ .Values.VideoDataGeneratorJob.parallelism }}

  state: started

  parameters:
    - name: jobClass
      value: "io.pravega.example.videoprocessor.VideoDataGeneratorJob"
    - name: scope
      value: {{ $.Release.Namespace }}
    - name: output-stream
      value: "video1"
    - name: output-minNumSegments
      value: "6"

    # Flink Job Parameters
#    - name: job.checkpointInterval
#      value: "60000"
#    - name: job.disableCheckpoint
#      value: "false"
#    - name: job.disableOperatorChaining
#      value: "true"
#    - name: rebalance
#      value: "false"
{{- end }}
